{% extends "base.html" %}
{% load static %}
{% load cart_tools %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'checkout/css/checkout.css' %}">
{% endblock %}

{% block content %}
<div class="container">
    <div class="row">
        <div class="col">
            <hr>
            <h2 class="logo-font mb-4">Shopping Cart</h2>
            <hr>
            <p>Your order information is below. This information will also be sent to {{ order.email }}</p>
        </div>
    </div>

    <div class="row">
        <div class="col-12 col-lg-8">
            <div class="order-confirmation-wrapper p-2 border">
                <section id="Order-Info">
                    <div class="row">
                        <div class="col">
                            <small class="text-muted">Order Info:</small>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12 col-md-4">
                            <p class="mb-0">Order Number:</p>
                        </div>
                        <div class="col-12 col-md-8 text-md-end">
                            <p class="mb-0">{{ order.order_number }}</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12 col-md-4">
                            <p class="mb-0">Order Date:</p>
                        </div>
                        <div class="col-12 col-md-8 text-md-end">
                            <p class="mb-0">{{ order.date }}</p>
                        </div>
                    </div>
                </section>
                <section id="Details">
                    <div class="row">
                        <div class="col">
                            <small class="text-muted">Details:</small>
                        </div>
                    </div>
                </section>
                <section id="Billing Info">
                    <div class="row">
                        <div class="col">
                            <small class="text-muted">Billing Info:</small>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12 col-md-4">
                            <p class="mb-0">Order Number:</p>
                        </div>
                        <div class="col-12 col-md-8 text-md-end">
                            <p class="mb-0">{{ order.order_number }}</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12 col-md-4">
                            <p class="mb-0">Order Number:</p>
                        </div>
                        <div class="col-12 col-md-8 text-md-end">
                            <p class="mb-0">{{ order.order_number }}</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12 col-md-4">
                            <p class="mb-0">Order Number:</p>
                        </div>
                        <div class="col-12 col-md-8 text-md-end">
                            <p class="mb-0">{{ order.order_number }}</p>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>
</div>

<div class="container mb-2" style="margin-top:5rem;">
    <div class="row">
        <div class="col-8">
            <div class="table-responsive rounded">
                <table class="table table-borderless">
                    <thead style="background-color: #191919;">
                        <tr>
                            <th class="ps-sm-5" scope="col">Service</th>
                            <th scope="col">Price</th>
                            <th scope="col">Qty</th>
                            <th class="text-end" scope="col">Subtotal</th>
                        </tr>
                    </thead>
                    {% for item in order.lineitems.all%}
                    <tr>
                        <td class="py-3 ps-sm-5">
                            <p class="my-0">{{ item.service.name }}</p>
                        </td>
                        <td class="py-3">
                            <p class="my-0">€{{ item.service.price }}</p>
                        </td>
                        <td class="py-3 w-25">
                            {{ item.quantity }}
                        </td>
                        <td class="py-3">
                            <p class="my-0 text-end">{{ item.lineitem_total }}</p>
                        </td>
                    </tr>
                    {% endfor %}
                    <tr>
                        <td colspan="4" class="text-end pt-5">
                            <hr>
                            <!-- <h5>Total before VAT:({{ VAT }}%) € {{ price_before_vat|floatformat:2 }}</h5> -->
                            <h5>Cart Total: € {{ order.order_total}}</h5>
                            {% if order.discount %}
                            <h5>Qty Discount<small>({{ combination_discount_percentage }}%)</small>: € {{ order.discount }}
                            </h5>
                            {% else %}
                            <h5>Qty Discount: None</h5>
                            {% endif %}
                            <hr>
                            <h3 class="mt-4"><strong>Net total: € {{ order.net_total }}</strong></h3>
                        </td>
                    </tr>
                </table>
                <span class="float-end">
                    <a href="{% url 'home' %}" class="btn btn-success rounded-0 btn-lg">
                        <span class="text-uppercase">Success!</span>
                        <span>
                            <i class="fas fa-check"></i>
                        </span>
                    </a>
                </span>
            </div>
        </div>
    </div>
</div>
<script src="{% static 'js/quantity_input_scripts.js' %}"></script>
<script src="{% static 'js/update_and_remove_scripts.js' %}"></script>

{% endblock %}